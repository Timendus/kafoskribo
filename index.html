<html>

  <head>
    <script type="text/javascript" src="coffee-script.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>

    <script type="text/coffeescript">
      $ ->
        window.ekzekutu = ->
          eval CoffeeScript.compile anstataŭi $("textarea").val()

        window.anstataŭi = (teksto) ->
          mapado =
            se: "if"
            alia: "else"
            alarmu: "alert"

          for esperanto, coffeescript of mapado
            teksto = teksto.replace(new RegExp(esperanto, "gi"), coffeescript)

          return teksto
    </script>
  </head>

  <body>
    <h1>Kafoskribo</h1>

    <textarea cols="100" rows="50">
se 4 > 8
  alarmu "Jes"
alia
  alarmu "Ne"
    </textarea>

    <p>
      <button onclick="ekzekutu();">
        Ekzekuti ĝin
      </button>
    </p>
  </body>

</html>
